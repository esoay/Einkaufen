<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ThriftStyle ‚Äì Secondhand-Shop</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="navbar">
      <div class="container nav-content">
        <button id="open-filter-drawer" class="icon-btn" aria-label="Filtermen√º √∂ffnen">‚ò∞</button>
        <a class="brand" href="#">ThriftStyle</a>
        <div class="search-wrap">
          <input id="search-input" type="search" placeholder="Suche nach Titel, Marke, Material, Farbe" aria-label="Produkte durchsuchen" />
        </div>

        <div class="account-nav" id="account-nav"></div>

        <button class="cart-button" id="open-cart" aria-label="Warenkorb √∂ffnen">
          <span aria-hidden="true">üõí</span>
          <span class="cart-count" id="cart-count">0</span>
        </button>
      </div>
    </header>

    <aside id="filter-drawer" class="drawer" aria-hidden="true">
      <div class="drawer-header">
        <h2>Filter</h2>
        <button id="close-filter-drawer" class="icon-btn" aria-label="Filtermen√º schlie√üen">‚úï</button>
      </div>
      <form id="filters-form" class="drawer-body" aria-label="Erweiterte Produktfilter">
        <label>Marke (Dropdown)
          <select id="brand-select"><option value="">Alle Marken</option></select>
        </label>
        <label>Marke (Freitext)
          <input id="brand-text" type="text" placeholder="z. B. Levi's" />
        </label>
        <label>Preis min (‚Ç¨)
          <input id="price-min" type="number" min="0" step="1" placeholder="0" />
        </label>
        <label>Preis max (‚Ç¨)
          <input id="price-max" type="number" min="0" step="1" placeholder="100" />
        </label>
        <fieldset id="category-filters"><legend>Kategorie</legend></fieldset>
        <fieldset id="condition-filters"><legend>Zustand</legend></fieldset>
        <fieldset id="size-filters"><legend>Gr√∂√üe</legend></fieldset>
        <fieldset id="color-filters"><legend>Farbe</legend></fieldset>
        <fieldset id="material-filters"><legend>Material</legend></fieldset>
        <div class="drawer-actions">
          <button type="button" id="reset-filters" class="secondary">Filter zur√ºcksetzen</button>
          <button type="button" id="apply-filters" class="primary">Filter anwenden</button>
        </div>
      </form>
    </aside>

    <div id="drawer-backdrop" class="overlay" hidden></div>

    <main class="container main-content">
      <section class="hero">
        <h1>Secondhand, smarter shoppen.</h1>
        <p>Nachhaltig einkaufen mit pr√§ziser Suche, Bildsuche und smarten Empfehlungen.</p>
      </section>

      <section id="account-view" class="account-section" hidden>
        <div class="section-head">
          <h2>Mein Konto</h2>
          <button type="button" id="back-to-shop" class="secondary">Zur√ºck zum Shop</button>
        </div>
        <div class="account-card" id="account-summary"></div>
      </section>

      <section id="sell-view" class="account-section" hidden>
        <div class="section-head">
          <h2>Artikel einstellen</h2>
          <button type="button" id="back-to-shop-2" class="secondary">Zur√ºck zum Shop</button>
        </div>
        <form id="sell-form" class="sell-form" aria-label="Artikel einstellen Formular">
          <div class="form-grid">
            <label>Titel*
              <input id="sell-title" required aria-label="Titel" type="text" maxlength="70" />
            </label>
            <label>Marke*
              <input id="sell-brand" required aria-label="Marke" type="text" />
            </label>
            <label>Preis (EUR)*
              <input id="sell-price" required aria-label="Preis in Euro" type="number" min="1" step="0.01" />
            </label>
            <label>Gr√∂√üe*
              <select id="sell-size" required aria-label="Gr√∂√üe"></select>
            </label>
            <label>Zustand*
              <select id="sell-condition" required aria-label="Zustand"></select>
            </label>
            <label>Farbe*
              <input id="sell-color" required aria-label="Farbe" type="text" />
            </label>
            <label>Material*
              <input id="sell-material" required aria-label="Material" type="text" />
            </label>
            <label>Kategorie*
              <select id="sell-category" required aria-label="Kategorie"></select>
            </label>
          </div>
          <label>Beschreibung
            <textarea id="sell-description" rows="3" aria-label="Beschreibung"></textarea>
          </label>
          <label>Bilder (1-3, image/*)*
            <input id="sell-images" type="file" multiple accept="image/*" aria-label="Produktbilder" />
          </label>
          <p id="sell-form-error" class="form-error" role="alert" aria-live="polite"></p>
          <button type="submit" class="primary">Artikel ver√∂ffentlichen</button>
        </form>
      </section>

      <section id="my-items-view" class="account-section" hidden>
        <div class="section-head">
          <h2>Meine Artikel</h2>
          <button type="button" id="back-to-shop-3" class="secondary">Zur√ºck zum Shop</button>
        </div>
        <div id="my-items-list" class="product-grid"></div>
      </section>

      <div id="shop-view" class="shop-layout">
        <aside class="category-sidebar" aria-label="Kategorienleiste">
          <h2>Kategorien</h2>
          <div id="category-rail" class="category-rail"></div>
        </aside>

        <div class="shop-content">
          <section>
            <h2>Empfohlen f√ºr dich</h2>
            <div id="recommended-grid" class="product-grid"></div>
          </section>

          <section class="image-search">
            <h2>Suche per Bild</h2>
            <label class="upload-box" for="image-upload" aria-label="Bild f√ºr Produktsuche hochladen">
              <input id="image-upload" type="file" accept="image/*" />
              <span>Bild hochladen oder hier klicken</span>
            </label>
            <img id="image-preview" alt="Vorschau des hochgeladenen Bildes" hidden />
            <div class="image-search-controls">
              <select id="image-category">
                <option value="">Kategorie w√§hlen</option>
                <option>Damen</option><option>Herren</option><option>Kinder</option><option>Elektro</option><option>Haushalt</option>
              </select>
              <select id="image-color"><option value="">Farbe w√§hlen</option></select>
              <button id="image-search-btn" class="primary" type="button">Bildsuche starten</button>
            </div>
          </section>

          <section>
            <div class="section-head">
              <h2>Produkte</h2>
              <select id="sort-select" aria-label="Produkte sortieren">
                <option value="newest">Neueste</option>
                <option value="price-asc">Preis ‚Üë</option>
                <option value="price-desc">Preis ‚Üì</option>
              </select>
            </div>
            <div id="product-grid" class="product-grid" aria-live="polite"></div>
          </section>
        </div>
      </div>
    </main>

    <aside class="cart-panel" id="cart-panel" aria-hidden="true">
      <div class="drawer-header">
        <h2>Warenkorb</h2>
        <button id="close-cart" class="icon-btn" aria-label="Warenkorb schlie√üen">‚úï</button>
      </div>
      <div id="cart-items" class="cart-items"></div>
      <div class="summary-box">
        <h3>Preis√ºbersicht</h3>
        <div class="summary-row"><span>Warenwert</span><strong id="summary-subtotal">0,00 ‚Ç¨</strong></div>
        <div class="summary-row"><span id="summary-shipping-label">Versand</span><strong id="summary-shipping">0,00 ‚Ç¨</strong></div>
        <div id="free-shipping-banner" class="free-shipping-banner" hidden>Kostenloser Versand ab 100 ‚Ç¨ aktiviert</div>
        <div class="summary-row"><span>K√§uferschutz-Geb√ºhr</span><strong id="summary-protection">0,00 ‚Ç¨</strong></div>
        <div class="summary-row"><span>Versicherung</span><strong id="summary-insurance">0,00 ‚Ç¨</strong></div>
        <div class="summary-row total"><span>Gesamtbetrag</span><strong id="summary-total">0,00 ‚Ç¨</strong></div>
      </div>
      <div class="cart-footer">
        <button id="open-checkout" class="primary" type="button">Checkout</button>
      </div>
    </aside>
    <div id="cart-backdrop" class="overlay" hidden></div>

    <dialog id="auth-modal" class="checkout-modal auth-modal">
      <div class="drawer-header">
        <h2 id="auth-title">Anmelden</h2>
        <button id="close-auth" class="icon-btn" aria-label="Anmelden schlie√üen">‚úï</button>
      </div>
      <form id="auth-form" class="drawer-body" aria-label="Anmelden und Registrieren">
        <label id="register-name-wrap" hidden>Name
          <input id="auth-name" type="text" aria-label="Name" />
        </label>
        <label>E-Mail
          <input id="auth-email" type="email" required aria-label="E-Mail" />
        </label>
        <label>Passwort
          <input id="auth-password" type="password" required minlength="6" aria-label="Passwort" />
        </label>
        <p id="auth-error" class="form-error" role="alert" aria-live="polite"></p>
        <button type="submit" class="primary" id="auth-submit">Anmelden</button>
        <button type="button" class="secondary" id="toggle-auth-mode">Noch kein Konto? Registrieren</button>
      </form>
    </dialog>

    <dialog id="checkout-modal" class="checkout-modal">
      <div class="drawer-header">
        <h2>Checkout (Demo)</h2>
        <button id="close-checkout" class="icon-btn" aria-label="Checkout schlie√üen">‚úï</button>
      </div>

      <div class="checkout-grid">
        <section class="checkout-section">
          <h3>Versandoptionen</h3>
          <fieldset>
            <legend>Versandart</legend>
            <label class="filter-option"><input type="radio" name="shipping-speed" value="standard" checked /> Standard (3‚Äì5 Werktage)</label>
            <label class="filter-option"><input type="radio" name="shipping-speed" value="express" /> Express (1‚Äì2 Werktage, +7,90 ‚Ç¨)</label>
          </fieldset>

          <fieldset>
            <legend>Versanddienstleister</legend>
            <label class="filter-option"><input type="radio" name="shipping-provider" value="DHL" checked /> DHL</label>
            <label class="filter-option"><input type="radio" name="shipping-provider" value="GLS" /> GLS</label>
            <label class="filter-option"><input type="radio" name="shipping-provider" value="UPS" /> UPS</label>
            <label class="filter-option"><input type="radio" name="shipping-provider" value="DPD" /> DPD</label>
          </fieldset>

          <label class="insurance-toggle">
            <input id="insurance-toggle" type="checkbox" />
            Versandversicherung hinzuf√ºgen (1,5% vom Warenwert, min 1,49 ‚Ç¨, max 9,99 ‚Ç¨)
          </label>
        </section>

        <section class="checkout-section">
          <h3>Zahlung</h3>
          <div class="payment-options">
            <section>
              <h4>PayPal</h4>
              <div id="paypal-buttons-container">PayPal Buttons laden‚Ä¶</div>
            </section>
            <section>
              <h4>Klarna</h4>
              <button class="secondary" type="button">Mit Klarna zahlen (Demo)</button>
              <p class="hint">TODO: Klarna Session via Backend (Klarna Payments API) erstellen.</p>
            </section>
            <section>
              <h4>Visa / Karte (Stripe)</h4>
              <div class="stripe-placeholder">Stripe Payment Element Platzhalter</div>
              <p class="hint">TODO: clientSecret vom Backend laden und Stripe Elements initialisieren.</p>
            </section>
          </div>
          <p class="hint">Hinweis: PayPal/Klarna/Stripe ben√∂tigen in Produktion Backend-Endpoints f√ºr sichere Keys, Order/Create und clientSecret.</p>
        </section>
      </div>
    </dialog>

    <div id="toast" class="toast" role="status" aria-live="polite" hidden></div>

    <script src="app.js"></script>
  </body>
</html>
